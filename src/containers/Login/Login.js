import React from 'react'
import PropTypes, { any } from 'prop-types'
import { Redirect } from 'react-router-dom'

import './login.scss'

import { AUTH } from 'utils/consts'
import Form from './components/Form'


const HeaderTitleAnimation = () => (
  <svg id="header" width="655" height="104" viewBox="0 0 655 104" fill="none" xmlns="http://www.w3.org/2000/svg">
    <path d="M33.744 100.896C27.856 100.896 22.5653 99.872 17.872 97.824C13.264 95.6906 9.63734 92.7893 6.992 89.12C4.34667 85.3653 2.98133 81.056 2.896 76.192H15.312C15.7387 80.3733 17.4453 83.9146 20.432 86.816C23.504 89.632 27.9414 91.04 33.744 91.04C39.2907 91.04 43.6427 89.6746 46.8 86.944C50.0427 84.128 51.664 80.544 51.664 76.192C51.664 72.7787 50.7254 70.0053 48.848 67.872C46.9707 65.7387 44.624 64.1173 41.808 63.008C38.992 61.8987 35.1947 60.704 30.416 59.424C24.528 57.888 19.792 56.352 16.208 54.816C12.7093 53.28 9.68 50.8907 7.12 47.648C4.64533 44.32 3.40802 39.8827 3.40802 34.336C3.40802 29.472 4.64533 25.1627 7.12 21.408C9.59466 17.6533 13.0507 14.752 17.488 12.704C22.0107 10.656 27.1733 9.63199 32.976 9.63199C41.3387 9.63199 48.1653 11.7227 53.456 15.904C58.832 20.0853 61.8613 25.632 62.544 32.544H49.744C49.3174 29.1307 47.5253 26.144 44.368 23.584C41.2107 20.9386 37.0293 19.616 31.824 19.616C26.96 19.616 22.992 20.896 19.92 23.456C16.848 25.9307 15.312 29.4293 15.312 33.952C15.312 37.1947 16.208 39.84 18 41.888C19.8773 43.936 22.1387 45.5147 24.784 46.624C27.5147 47.648 31.312 48.8427 36.176 50.208C42.064 51.8293 46.8 53.4507 50.384 55.072C53.968 56.608 57.04 59.04 59.6 62.368C62.16 65.6106 63.44 70.048 63.44 75.68C63.44 80.032 62.288 84.128 59.984 87.968C57.68 91.808 54.2667 94.9227 49.744 97.312C45.2214 99.7013 39.888 100.896 33.744 100.896Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M79.829 64.672C79.829 57.504 81.2797 51.232 84.181 45.856C87.0823 40.3947 91.0504 36.1707 96.085 33.184C101.205 30.1973 106.88 28.704 113.109 28.704C119.253 28.704 124.586 30.0267 129.109 32.672C133.632 35.3173 137.002 38.6453 139.221 42.656V29.856H150.997V100H139.221V86.944C136.917 91.04 133.461 94.4534 128.853 97.184C124.33 99.8294 119.04 101.152 112.981 101.152C106.752 101.152 101.12 99.616 96.085 96.544C91.0504 93.472 87.0823 89.1627 84.181 83.616C81.2797 78.0694 79.829 71.7547 79.829 64.672ZM139.221 64.8C139.221 59.5093 138.154 54.9013 136.021 50.976C133.888 47.0507 130.986 44.064 127.317 42.016C123.733 39.8827 119.765 38.816 115.413 38.816C111.061 38.816 107.093 39.84 103.509 41.888C99.925 43.936 97.0663 46.9227 94.933 50.848C92.7997 54.7733 91.733 59.3813 91.733 64.672C91.733 70.048 92.7997 74.7413 94.933 78.752C97.0663 82.6773 99.925 85.7067 103.509 87.84C107.093 89.888 111.061 90.912 115.413 90.912C119.765 90.912 123.733 89.888 127.317 87.84C130.986 85.7067 133.888 82.6773 136.021 78.752C138.154 74.7413 139.221 70.0907 139.221 64.8Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M202.825 39.456H188.105V100H176.457V39.456H167.369V29.856H176.457V24.864C176.457 17.0133 178.462 11.296 182.473 7.71201C186.569 4.04267 193.097 2.20801 202.057 2.20801V11.936C196.937 11.936 193.31 12.96 191.177 15.008C189.129 16.9707 188.105 20.256 188.105 24.864V29.856H202.825V39.456Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M284.006 62.24C284.006 64.4587 283.878 66.8054 283.622 69.28H227.558C227.985 76.192 230.331 81.6107 234.598 85.536C238.95 89.376 244.198 91.296 250.342 91.296C255.377 91.296 259.558 90.144 262.886 87.84C266.299 85.4507 268.689 82.2933 270.054 78.368H282.598C280.721 85.1093 276.966 90.6133 271.334 94.88C265.702 99.0613 258.705 101.152 250.342 101.152C243.686 101.152 237.713 99.6587 232.422 96.672C227.217 93.6853 223.121 89.4613 220.134 84C217.147 78.4533 215.654 72.0533 215.654 64.8C215.654 57.5467 217.105 51.1893 220.006 45.728C222.907 40.2667 226.961 36.0853 232.166 33.184C237.457 30.1973 243.515 28.704 250.342 28.704C256.998 28.704 262.886 30.1547 268.006 33.056C273.126 35.9573 277.051 39.968 279.782 45.088C282.598 50.1227 284.006 55.84 284.006 62.24ZM271.974 59.808C271.974 55.3706 270.993 51.5733 269.03 48.416C267.067 45.1733 264.379 42.7413 260.966 41.12C257.638 39.4133 253.926 38.56 249.83 38.56C243.942 38.56 238.907 40.4373 234.726 44.192C230.63 47.9467 228.283 53.152 227.686 59.808H271.974Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M452.834 10.784L426.978 100H413.922L393.186 28.192L371.682 100L358.754 100.128L333.794 10.784H346.21L365.666 86.432L387.17 10.784H400.226L420.706 86.176L440.29 10.784H452.834Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M464.829 64.672C464.829 57.504 466.28 51.232 469.181 45.856C472.082 40.3947 476.05 36.1707 481.085 33.184C486.205 30.1973 491.88 28.704 498.109 28.704C504.253 28.704 509.586 30.0267 514.109 32.672C518.632 35.3173 522.002 38.6453 524.221 42.656V29.856H535.997V100H524.221V86.944C521.917 91.04 518.461 94.4534 513.853 97.184C509.33 99.8294 504.04 101.152 497.981 101.152C491.752 101.152 486.12 99.616 481.085 96.544C476.05 93.472 472.082 89.1627 469.181 83.616C466.28 78.0694 464.829 71.7547 464.829 64.672ZM524.221 64.8C524.221 59.5093 523.154 54.9013 521.021 50.976C518.888 47.0507 515.986 44.064 512.317 42.016C508.733 39.8827 504.765 38.816 500.413 38.816C496.061 38.816 492.093 39.84 488.509 41.888C484.925 43.936 482.066 46.9227 479.933 50.848C477.8 54.7733 476.733 59.3813 476.733 64.672C476.733 70.048 477.8 74.7413 479.933 78.752C482.066 82.6773 484.925 85.7067 488.509 87.84C492.093 89.888 496.061 90.912 500.413 90.912C504.765 90.912 508.733 89.888 512.317 87.84C515.986 85.7067 518.888 82.6773 521.021 78.752C523.154 74.7413 524.221 70.0907 524.221 64.8Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M570.929 5.28V100H559.281V5.28H570.929Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
    <path d="M633.549 100L606.029 69.024V100H594.381V5.28H606.029V60.96L633.037 29.856H649.293L616.269 64.8L649.421 100H633.549Z" stroke="white" strokeWidth="4.4" mask="url(#path-1-outside-1)" />
  </svg>
)

const Login = (props) => {
  console.log('Login')
  const { isUserAuthenticated, location, handleLoginFormSubmit } = props
  if (isUserAuthenticated === AUTH.isAuthenticated || isUserAuthenticated === AUTH.isPending) {
    const { from } = location.state || { from: { pathname: '/' } }
    return <Redirect to={from} />
  }
  return (
    <div className="login-page">
      { HeaderTitleAnimation() }
      <div className="login-page__form-wrapper">
        <Form
          handleLoginFormSubmit={handleLoginFormSubmit}
        />
      </div>
    </div>
  )
}

export default Login

Login.propTypes = {
  handleLoginFormSubmit: PropTypes.func.isRequired,
  isUserAuthenticated: PropTypes.string.isRequired,
  location: PropTypes.objectOf(any).isRequired,
}
